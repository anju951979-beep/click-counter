<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Minecraft Study Streak</title>

<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<style>
body {
    background: #1e11e1;
    color: #fff;
    font-family: 'Press Start 2P', monospace;
    text-align: center;
    padding-top: 40px;
}

.container {
    background: #191919;
    width: 420px;
    margin: auto;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 0 20px black;
}

#timer {
    font-size: 42px;
    margin: 20px 0;
}

button {
    padding: 12px 20px;
    font-size: 16px;
    border: none;
    border-radius: 10px;
    margin: 8px;
    background: #0d0d0d;
    color: white;
    cursor: pointer;
}

button:hover {
    background: #333;
}

#streakBox {
    background: #111;
    padding: 15px;
    margin-top: 20px;
    border-radius: 10px;
    font-size: 20px;
}
</style>
</head>
<body>

<div class="container">
    <h1>Study Timer</h1>

    <div id="timer">00:00:00</div>

    <button onclick="startTimer()">Start</button>
    <button onclick="stopTimer()">Stop</button>
    <button onclick="resetTimer()">Reset</button>

    <div id="streakBox">
        Daily Streak: <span id="streak">0</span> ðŸ”¥
    </div>
</div>

<script>
// -------------------------------
// TIMER
// -------------------------------

let seconds = 0;
let interval = null;

// force numeric
seconds = Number(localStorage.getItem("mc_seconds")) || 0;

// streak system
let streak = Number(localStorage.getItem("mc_streak")) || 0;
let lastDate = localStorage.getItem("mc_last_date") || "";

// load streak UI
document.getElementById("streak").textContent = streak;

// convert seconds -> HH:MM:SS
function updateTimer() {
    seconds = Number(seconds) + 1; // force number every time
    
    localStorage.setItem("mc_seconds", seconds);

    let hrs = Math.floor(seconds / 3600);
    let mins = Math.floor((seconds % 3600) / 60);
    let secs = seconds % 60;

    document.getElementById("timer").textContent =
        String(hrs).padStart(2, "0") + ":" +
        String(mins).padStart(2, "0") + ":" +
        String(secs).padStart(2, "0");

    checkDailyGoal();
}

function startTimer() {
    if (!interval) {
        interval = setInterval(updateTimer, 1000);
    }
}

function stopTimer() {
    clearInterval(interval);
    interval = null;
}

function resetTimer() {
    stopTimer();
    seconds = 0;
    localStorage.setItem("mc_seconds", 0);
    document.getElementById("timer").textContent = "00:00:00";
}

// -------------------------------
// STREAK SYSTEM
// -------------------------------

function checkDailyGoal() {
    const today = new Date().toDateString();

    let hours = Math.floor(seconds / 3600);

    // if today already scored streak â†’ do nothing
    if (today === lastDate) return;

    // hit 6+ hours?
    if (hours >= 6) {
        streak++;
        lastDate = today;

        localStorage.setItem("mc_streak", streak);
        localStorage.setItem("mc_last_date", today);

        document.getElementById("streak").textContent = streak;
    }
}

// auto-break streak at midnight if not reached 6 hrs
setInterval(() => {
    const today = new Date().toDateString();

    if (lastDate !== today) {
        // if day changed AND not achieved 6hrs â†’ break streak
        let hours = Math.floor(seconds / 3600);

        if (hours < 6) {
            streak = 0;
            localStorage.setItem("mc_streak", 0);
            document.getElementById("streak").textContent = 0;
        }

        // reset timer for new day
        seconds = 0;
        localStorage.setItem("mc_seconds", 0);
    }
}, 30000); // checks every 30 sec

</script>

</body>
</html>


