<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Study Streak Tracker</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
body {
    background: #191919;
    font-family: 'Press Start 2P', monospace;
    color: #f0f0f0;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
}
.container {
    text-align: center;
    background: #191919;
    padding: 30px;
    border-radius: 15px;
    box-shadow: 0 0 15px #000;
}

#count {
    font-size: 40px;
    margin: 10px 0;
}

button {
    padding: 10px 25px;
    font-size: 18px;
    border: none;
    border-radius: 10px;
    margin: 7px;
    cursor: pointer;
    background: #0d0d0d;
    color: #f0f0f0;
    transition: 0.2s;
}
button:hover { background: #2c2c2c; }

#reset { background: #0d0d0d; }

.streak-box {
    margin-top: 25px;
    font-size: 20px;
}
</style>
</head>

<body>
<div class="container">
    <h1>Hours Studied</h1>
    <div id="count">0</div>

    <button onclick="decrement()">-</button>
    <button onclick="increment()">+</button>
    <br>
    <button id="reset" onclick="resetCount()">Reset</button>

    <div class="streak-box">
        Streak: <span id="streak">0</span><br>
        Freeze Left: <span id="freeze">1</span>
    </div>
</div>

<script>
/* ----- Load Stored Values ----- */
let hours = localStorage.getItem("hours")
            ? parseInt(localStorage.getItem("hours")) : 0;

let streak = localStorage.getItem("streak")
             ? parseInt(localStorage.getItem("streak")) : 0;

let freeze = localStorage.getItem("freeze")
             ? parseInt(localStorage.getItem("freeze")) : 1;

let lastDay = localStorage.getItem("lastDay")
             ? localStorage.getItem("lastDay") : "";

/* ----- Display Update ----- */
function updateDisplay() {
    document.getElementById("count").textContent = hours;
    document.getElementById("streak").textContent = streak;
    document.getElementById("freeze").textContent = freeze;
}

/* ----- Study Actions ----- */
function increment() {
    hours++;
    localStorage.setItem("hours", hours);
    dailyCheck(true);
    updateDisplay();
}

function decrement() {
    if (hours > 0) hours--;
    localStorage.setItem("hours", hours);
    updateDisplay();
}

function resetCount() {
    hours = 0;
    localStorage.setItem("hours", hours);
    updateDisplay();
}

/* ----- Streak Logic ----- */
function dailyCheck(didStudy) {
    const today = new Date().toDateString();

    if (lastDay === today) return; // same day, nothing to do

    // New day
    if (didStudy) {
        streak++;
        freeze = 1; // restore freeze when streak continues
    } 
    else {
        // did not study today
        if (freeze > 0) {
            freeze--; // freeze used
        } else {
            streak = 0; // lose streak
        }
        hours = 0; // new day resets hours
    }

    lastDay = today;

    localStorage.setItem("streak", streak);
    localStorage.setItem("freeze", freeze);
    localStorage.setItem("lastDay", lastDay);
    localStorage.setItem("hours", hours);
}

dailyCheck(false); 
updateDisplay();
</script>
</body>
</html>
